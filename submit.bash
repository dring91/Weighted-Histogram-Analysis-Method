#!/bin/bash
#SBATCH --nodes=1
#SBATCH --tasks-per-node=1
#SBATCH --mem-per-cpu=100M
#SBATCH -p standby
#SBATCH -t 10:00
#SBATCH -J analyze
#SBATCH -o analyze.o%j

module load python3/3.7.0
. ~/wavy/py37/bin/activate
exc=~/wavy/scripts



N=100; S=0; R=3; A=1; W=8; P=1; K=0.05; E=0554
dirs=(3206151 3206152 3206153 3206154 3206155 3206156 3206157 3206158 3206159 3206160 3206161 3206162 3206163 3206164 3206165 3206166 3206167 3206168 3206169 3206170 3206171 3618939 3618940 3618941 3618942 3618943 3618944 3618945 3618946 3618947 3618948 3618949 3618950 3618951 3618952 3618953 3618954 3618955 3618956 3618957 3618958 3618959 3618960 3618961 3618962 3618963)
M=(0 12 24 36 48 60 72 84 96 108 120 126 132 138 144 150 156 162 168 174 180 186 192 204 216 228 240 252 258 264 270 276 282 288 294 300 306 312 324 336 348 360 372 384 396 408)
N=100; S=0; R=3; A=1; W=8; P=1; K=0.05; E=0846
dirs=(3215649 3215650 3215651 3215652 3215653 3215654 3215655 3215656 3215657 3215658 3215659 3215660 3215661 3215662 3215663 3215664 3215665 3215666 3215667 3215668 3215669 3313498 3313499 3313500 3313501 3313502 3313503 3313504 3313505 3313506 3313507 3313508 3313509 3313510 3313511 3313512 3313513 3338454 3338455 3338456 3338457 3338458 3338459 3338461 3338462 3338463 3338464)
M=(0 12 24 36 48 60 72 84 96 108 120 126 132 138 144 150 156 162 168 174 180 186 192 204 216 228 240 246 252 264 276 282 288 300 306 312 318 324 336 348 354 360 372 378 384 396 408)
N=100; S=0; R=3; A=1; W=8; P=1; K=0.05; E=0515
dirs=(3201681 3201682 3201683 3201684 3201686 3201687 3201688 3201690 3201691 3201692 3201693 3201694 3201696 3201697 3201698 3201699 3201700 3201701 3201703 3201704 3201705 3579299 3579300 3579301 3579302 3579303 3579304 3579305 3579306 3579307 3579308 3579310 3579311 3579312 3579313 3579314 3579315 3579316 3579317 3579318 3579318 3579320 3579321 3579322 3579323 3579324)
M=(0 12 24 36 48 60 72 84 96 108 120 126 132 138 144 150 156 162 168 174 180 186 192 198 204 216 222 228 240 252 258 276 282 288 300 306 312 324 336 348 360 372 378 386 396 408)

echo ${#dirs[*]}
echo ${#M[*]}
for i in {0..206}; do
#for i in {0..22}; do
  j=$(( $i-92 ))
  files[$i]="$SCRATCH/indus/${dirs[$i]}/plumed.out"
  #files[$i]="$SCRATCH/indus/A${A}W${W}/M${M[$i]}"
  #files[$i]="$SCRATCH/indus/${dirs[$i]}/heights.dat"
  #files[$i]="N${N}_S${S}_R${R}_A${A}_W${W}_P${P}_E${E}_M${M[$j]}.lammpstrj"
  #dirs[$i]="$SCRATCH/indus/${dirs[$i]}/"
  #ls "${dirs[$i]}${files[$i]}"
  #time python $exc/calcMeltHeight.py -i ${files[$i]} -o heights.dat --dir $SCRATCH/indus/${dirs[$i]}/ --polymer 1 --capillary 2 3
done

time python $exc/wham.py -i ${files[*]:0:5} -p indus/A${A}W${W}/ -x ${M[*]:0:5} -k $K -o N${N}S${S}R${R}A${A}W${W}P${P}E${E}
